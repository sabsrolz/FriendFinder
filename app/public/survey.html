<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <p id="instructions">
      Please fill out the following questions and click submit to see your
      friend match!
    </p>
    <form id="question-form">
      <div id="name-label" class="form-group">
        <label class="m-2 font-weight-bold" for="nameInput">Name</label>
        <input
          type="text"
          class="form-control"
          id="nameInput"
          placeholder="Your name"
        />
      </div>
      <div id="image-label" class="form-group">
        <label class="m-2 font-weight-bold" for="imageInput">Image</label>
        <input
          type="text"
          class="form-control"
          id="imageInput"
          placeholder=""
        />
      </div>
      <div id="question1">
        <p>
          Please select a rating for each question (1 = disagree, 2 = neutral, 3
          = agree)
        </p>
        <label class="font-weight-bold my-1 mr-2" for="question1Input"
          >Question 1:</label
        >
        <label for="question1Input"
          >Your mind is always buzzing with unexplored ideas and plans.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question1Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question2">
        <label class="font-weight-bold my-1 mr-2" for="question2Input"
          >Question 2:
        </label>
        <label for="question2Input"
          >Generally speaking, you rely more on your experience than your
          imagination.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question2Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question3">
        <label class="font-weight-bold my-1 mr-2" for="question3Input"
          >Question 3:</label
        >
        <label for="question3Input"
          >You find it easy to stay relaxed and focused even when there is some
          pressure.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question3Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question4">
        <label class="font-weight-bold my-1 mr-2" for="question4Input"
          >Question 4:</label
        >
        <label for="question4Input"
          >You rarely do something just out of sheer curiosity.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question4Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question5">
        <label class="font-weight-bold my-1 mr-2" for="question5Input"
          >Question 5:</label
        >
        <label for="question5Input">People can rarely upset you.</label>
        <select class="custom-select my-1 mr-sm-2" id="question5Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question6">
        <label class="font-weight-bold my-1 mr-2" for="question6Input"
          >Question 6:</label
        >
        <label for="question6Input"
          >It is often difficult for you to relate to other people’s
          feelings.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question6Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question7">
        <label class="font-weight-bold my-1 mr-2" for="question7Input"
          >Question 7:</label
        >
        <label for="question7Input"
          >In a discussion, truth should be more important than people’s
          sensitivities.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question7Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question8">
        <label class="font-weight-bold my-1 mr-2" for="question8Input"
          >Question 8:</label
        >
        <label for="question8Input"
          >You rarely get carried away by fantasies and ideas.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question8Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question9">
        <label class="font-weight-bold my-1 mr-2" for="question9Input"
          >Question 9:
        </label>
        <label for="question9Input"
          >You think that everyone’s views should be respected regardless of
          whether they are supported by facts or not.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question9Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <div id="question10">
        <label class="font-weight-bold my-1 mr-2" for="question10Input"
          >Question 10:</label
        >
        <label for="question10Input"
          >You feel more energetic after spending time with a group of
          people.</label
        >
        <select class="custom-select my-1 mr-sm-2" id="question10Input">
          <option selected>Choose...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>
      <button
        id="submit-button"
        type="submit"
        class="m-2 btn btn-primary"
        data-toggle="modal"
        data-target="#modal-section"
      >
        Submit
      </button>
    </form>

    <div id="match-result"></div>
    <div class="text-center">
        <a href="home"
          >
          
          </a
        >
      </div>
    </div>

    <footer class="footer">
      <div id = "api-link" class="container">
        <p><a href="/api/friends">API Friends Link</a> |</p>
      </div>
    </footer>
    <script>
      $("#match-result").hide();
      $("#submit-button").on("click", function(event) {
        event.preventDefault();

        $("#match-result").show();
        //imageLink will only contain a placeholder for this assignment
        let friendObject = {
          name: $("#nameInput")
            .val()
            .trim(),
          imageLink: $("#imageInput")
            .val()
            .trim(),
          score: [
            parseInt($("#question1Input").val()),
            parseInt($("#question2Input").val()),
            parseInt($("#question3Input").val()),
            parseInt($("#question4Input").val()),
            parseInt($("#question5Input").val()),
            parseInt($("#question6Input").val()),
            parseInt($("#question7Input").val()),
            parseInt($("#question8Input").val()),
            parseInt($("#question9Input").val()),
            parseInt($("#question10Input").val())
          ]
        };
        axios
          .post("/api/friends", friendObject)
          .then(function(response) {
            console.log(response.data.friend_name);
            $("#question-form").hide();
            $("#instructions").hide();
            $("#api-link").hide();
            $("#match-result").html(
              `${friendObject.name}, Your friend match is ${response.data.friend_name}`
            );
          })
          .catch(function(error) {
            console.log(error);
          });
      });
    </script>
  </body>
</html>
